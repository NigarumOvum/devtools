---
import Layout from "../../layouts/Layout.astro";
import { getLangFromUrl, useTranslations } from "../../utils/i18n";

// React Tools
import JsonFormatter from "../../components/tools/react/JsonFormatter";
import PerformanceSuite from "../../components/tools/react/PerformanceSuite";
import HttpClient from "../../components/tools/react/HttpClient";
import Base64Tool from "../../components/tools/react/Base64Tool";
import UuidGenerator from "../../components/tools/react/UuidGenerator";
import RegexTester from "../../components/tools/react/RegexTester";
import MarkdownPreview from "../../components/tools/react/MarkdownPreview";
import DiffChecker from "../../components/tools/react/DiffChecker";
import QrCodeGenerator from "../../components/tools/react/QrCodeGenerator";
import JsonToTypescript from "../../components/tools/react/JsonToTypescript";
import JsMinifier from "../../components/tools/react/JsMinifier";
import CssConverter from "../../components/tools/react/CssConverter";
import PwaManifestGenerator from "../../components/tools/react/PwaManifestGenerator";
import HtmlConverter from "../../components/tools/react/HtmlConverter";
import AutoRegex from "../../components/tools/react/AutoRegex";
import A11yLab from "../../components/tools/react/A11yLab";
import HtmlEditor from "../../components/tools/react/HtmlEditor";
import LayoutGenerator from "../../components/tools/react/LayoutGenerator";

// Vue Tools
import JwtDecoder from "../../components/tools/vue/JwtDecoder.vue";
import TimestampConverter from "../../components/tools/vue/TimestampConverter.vue";
import UrlCodec from "../../components/tools/vue/UrlCodec.vue";
import CssFormatter from "../../components/tools/vue/CssFormatter.vue";
import HtmlEntityEncoder from "../../components/tools/vue/HtmlEntityEncoder.vue";
import SqlFormatter from "../../components/tools/vue/SqlFormatter.vue";

// Svelte Tools
import HashGenerator from "../../components/tools/svelte/HashGenerator.svelte";
import ColorConverter from "../../components/tools/svelte/ColorConverter.svelte";
import LoremGenerator from "../../components/tools/svelte/LoremGenerator.svelte";
import CronParser from "../../components/tools/svelte/CronParser.svelte";
import PasswordGenerator from "../../components/tools/svelte/PasswordGenerator.svelte";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
---

<Layout title={t("main.title")}>
  <main
    id="main-content"
    class="md:pl-72 h-[calc(100vh-5rem)] overflow-y-auto snap-y snap-mandatory scroll-smooth pt-20"
  >
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      <!-- Hero Section -->
      <header class="text-center mb-16 animate-fade-in">
        <div
          class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-accent-100 dark:bg-accent-900/30 text-accent-600 dark:text-accent-400 text-sm font-medium mb-6"
        >
          <span>⚡</span>
          <span>19 Herramientas Esenciales para Desarrolladores</span>
        </div>
        <h1 class="text-4xl md:text-5xl lg:text-6xl font-bold mb-6">
          <span class="gradient-text">{t("main.title")}</span>
        </h1>
        <p
          class="text-lg md:text-xl text-slate-600 dark:text-slate-400 max-w-2xl mx-auto leading-relaxed"
        >
          {t("main.description")}
        </p>
      </header>

      <!-- Tool Sections Loop -->
      <!-- Formatters -->
      <section
        class="h-[calc(100vh-5rem)] snap-start flex flex-col justify-center px-4 md:px-8 reveal-on-scroll"
      >
        <div class="max-w-7xl mx-auto w-full">
          <div
            id="json-formatter"
            class="glass-morph p-1 rounded-[2.5rem] shadow-2xl transition-all duration-700"
          >
            <JsonFormatter client:load />
          </div>
        </div>
      </section>

      <section
        class="h-[calc(100vh-5rem)] snap-start flex flex-col justify-center px-4 md:px-8 reveal-on-scroll"
      >
        <div class="max-w-7xl mx-auto w-full">
          <div
            id="base64-tool"
            class="glass-morph p-1 rounded-[2.5rem] shadow-2xl transition-all duration-700"
          >
            <Base64Tool client:load />
          </div>
        </div>
      </section>

      <section
        class="h-[calc(100vh-5rem)] snap-start flex flex-col justify-center px-4 md:px-8 reveal-on-scroll"
      >
        <div class="max-w-7xl mx-auto w-full">
          <div
            id="css-formatter"
            class="glass-morph p-1 rounded-[2.5rem] shadow-2xl transition-all duration-700"
          >
            <CssFormatter client:load />
          </div>
        </div>
      </section>

      <section
        class="h-[calc(100vh-5rem)] snap-start flex flex-col justify-center px-4 md:px-8 reveal-on-scroll"
      >
        <div class="max-w-7xl mx-auto w-full">
          <div
            id="sql-formatter"
            class="glass-morph p-1 rounded-[2.5rem] shadow-2xl transition-all duration-700"
          >
            <SqlFormatter client:load />
          </div>
        </div>
      </section>

      <!-- Generators -->
      <section
        class="h-[calc(100vh-5rem)] snap-start flex flex-col justify-center px-4 md:px-8 reveal-on-scroll"
      >
        <div class="max-w-7xl mx-auto w-full">
          <div
            id="uuid-generator"
            class="glass-morph p-1 rounded-[2.5rem] shadow-2xl transition-all duration-700"
          >
            <UuidGenerator client:load />
          </div>
        </div>
      </section>

      <section
        class="h-[calc(100vh-5rem)] snap-start flex flex-col justify-center px-4 md:px-8 reveal-on-scroll"
      >
        <div class="max-w-7xl mx-auto w-full">
          <div
            id="hash-generator"
            class="glass-morph p-1 rounded-[2.5rem] shadow-2xl transition-all duration-700"
          >
            <HashGenerator client:load />
          </div>
        </div>
      </section>

      <section
        class="h-[calc(100vh-5rem)] snap-start flex flex-col justify-center px-4 md:px-8 reveal-on-scroll"
      >
        <div class="max-w-7xl mx-auto w-full">
          <div
            id="lorem-generator"
            class="glass-morph p-1 rounded-[2.5rem] shadow-2xl transition-all duration-700"
          >
            <LoremGenerator client:load />
          </div>
        </div>
      </section>

      <section
        class="h-[calc(100vh-5rem)] snap-start flex flex-col justify-center px-4 md:px-8 reveal-on-scroll"
      >
        <div class="max-w-7xl mx-auto w-full">
          <div
            id="password-generator"
            class="glass-morph p-1 rounded-[2.5rem] shadow-2xl transition-all duration-700"
          >
            <PasswordGenerator client:load />
          </div>
        </div>
      </section>

      <section
        class="h-[calc(100vh-5rem)] snap-start flex flex-col justify-center px-4 md:px-8 reveal-on-scroll"
      >
        <div class="max-w-7xl mx-auto w-full">
          <div
            id="qr-generator"
            class="glass-morph p-1 rounded-[2.5rem] shadow-2xl transition-all duration-700"
          >
            <QrCodeGenerator client:load />
          </div>
        </div>
      </section>

      <!-- Converters -->
      <section
        class="h-[calc(100vh-5rem)] snap-start flex flex-col justify-center px-4 md:px-8 reveal-on-scroll"
      >
        <div class="max-w-7xl mx-auto w-full">
          <div
            id="color-converter"
            class="glass-morph p-1 rounded-[2.5rem] shadow-2xl transition-all duration-700"
          >
            <ColorConverter client:load />
          </div>
        </div>
      </section>

      <section
        class="h-[calc(100vh-5rem)] snap-start flex flex-col justify-center px-4 md:px-8 reveal-on-scroll"
      >
        <div class="max-w-7xl mx-auto w-full">
          <div
            id="timestamp-converter"
            class="glass-morph p-1 rounded-[2.5rem] shadow-2xl transition-all duration-700"
          >
            <TimestampConverter client:load />
          </div>
        </div>
      </section>

      <section
        class="h-[calc(100vh-5rem)] snap-start flex flex-col justify-center px-4 md:px-8 reveal-on-scroll"
      >
        <div class="max-w-7xl mx-auto w-full">
          <div
            id="url-codec"
            class="glass-morph p-1 rounded-[2.5rem] shadow-2xl transition-all duration-700"
          >
            <UrlCodec client:load />
          </div>
        </div>
      </section>

      <section
        class="h-[calc(100vh-5rem)] snap-start flex flex-col justify-center px-4 md:px-8 reveal-on-scroll"
      >
        <div class="max-w-7xl mx-auto w-full">
          <div
            id="html-entity-encoder"
            class="glass-morph p-1 rounded-[2.5rem] shadow-2xl transition-all duration-700"
          >
            <HtmlEntityEncoder client:load />
          </div>
        </div>
      </section>

      <section
        class="h-[calc(100vh-5rem)] snap-start flex flex-col justify-center px-4 md:px-8 reveal-on-scroll"
      >
        <div class="max-w-7xl mx-auto w-full">
          <div
            id="json-to-typescript"
            class="glass-morph p-1 rounded-[2.5rem] shadow-2xl transition-all duration-700"
          >
            <JsonToTypescript client:load />
          </div>
        </div>
      </section>

      <!-- Validators -->
      <section
        class="h-[calc(100vh-5rem)] snap-start flex flex-col justify-center px-4 md:px-8 reveal-on-scroll"
      >
        <div class="max-w-7xl mx-auto w-full">
          <div
            id="regex-tester"
            class="glass-morph p-1 rounded-[2.5rem] shadow-2xl transition-all duration-700"
          >
            <RegexTester client:load />
          </div>
        </div>
      </section>

      <section
        class="h-[calc(100vh-5rem)] snap-start flex flex-col justify-center px-4 md:px-8 reveal-on-scroll"
      >
        <div class="max-w-7xl mx-auto w-full">
          <div
            id="jwt-decoder"
            class="glass-morph p-1 rounded-[2.5rem] shadow-2xl transition-all duration-700"
          >
            <JwtDecoder client:load />
          </div>
        </div>
      </section>

      <section
        class="h-[calc(100vh-5rem)] snap-start flex flex-col justify-center px-4 md:px-8 reveal-on-scroll"
      >
        <div class="max-w-7xl mx-auto w-full">
          <div
            id="cron-parser"
            class="glass-morph p-1 rounded-[2.5rem] shadow-2xl transition-all duration-700"
          >
            <CronParser client:load />
          </div>
        </div>
      </section>

      <!-- Text Tools -->
      <section
        class="h-[calc(100vh-5rem)] snap-start flex flex-col justify-center px-4 md:px-8 reveal-on-scroll"
      >
        <div class="max-w-7xl mx-auto w-full">
          <div
            id="markdown-preview"
            class="glass-morph p-1 rounded-[2.5rem] shadow-2xl transition-all duration-700"
          >
            <MarkdownPreview client:load />
          </div>
        </div>
      </section>

      <section
        class="h-[calc(100vh-5rem)] snap-start flex flex-col justify-center px-4 md:px-8 reveal-on-scroll"
      >
        <div class="max-w-7xl mx-auto w-full">
          <div
            id="diff-checker"
            class="glass-morph p-1 rounded-[2.5rem] shadow-2xl transition-all duration-700"
          >
            <DiffChecker client:load />
          </div>
        </div>
      </section>

      <!-- Advanced Tools -->
      <section
        class="h-[calc(100vh-5rem)] snap-start flex flex-col justify-center px-4 md:px-8 reveal-on-scroll"
      >
        <div class="max-w-7xl mx-auto w-full">
          <div
            id="http-client"
            class="glass-morph p-1 rounded-[2.5rem] shadow-2xl transition-all duration-700"
          >
            <HttpClient client:load />
          </div>
        </div>
      </section>

      <section
        class="h-[calc(100vh-5rem)] snap-start flex flex-col justify-center px-4 md:px-8 reveal-on-scroll"
      >
        <div class="max-w-7xl mx-auto w-full">
          <div
            id="performance-lab"
            class="glass-morph p-1 rounded-[2.5rem] shadow-2xl transition-all duration-700"
          >
            <PerformanceSuite client:load />
          </div>
        </div>
      </section>

      <!-- About Section -->
      <section id="about" class="mb-16">
        <div class="glass-card rounded-2xl p-8 md:p-12">
          <div class="max-w-3xl mx-auto text-center">
            <h2 class="text-2xl font-bold text-slate-800 dark:text-white mb-4">
              Acerca de DevTools Pro
            </h2>
            <p class="text-slate-600 dark:text-slate-400 mb-6 leading-relaxed">
              Construido con la arquitectura Islands de Astro, este kit de
              herramientas muestra una integración perfecta de componentes
              React, Vue y Svelte. Todas las herramientas se ejecutan
              completamente en tu navegador — ningún dato se envía a ningún
              servidor.
            </p>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
              <div class="p-4 rounded-xl bg-slate-50 dark:bg-slate-800/50">
                <div class="text-3xl font-bold gradient-text">19</div>
                <div class="text-sm text-slate-500 dark:text-slate-400">
                  Herramientas
                </div>
              </div>
              <div class="p-4 rounded-xl bg-slate-50 dark:bg-slate-800/50">
                <div class="text-3xl font-bold gradient-text">3</div>
                <div class="text-sm text-slate-500 dark:text-slate-400">
                  Frameworks
                </div>
              </div>
              <div class="p-4 rounded-xl bg-slate-50 dark:bg-slate-800/50">
                <div class="text-3xl font-bold gradient-text">0</div>
                <div class="text-sm text-slate-500 dark:text-slate-400">
                  Datos Enviados
                </div>
              </div>
              <div class="p-4 rounded-xl bg-slate-50 dark:bg-slate-800/50">
                <div class="text-3xl font-bold gradient-text">∞</div>
                <div class="text-sm text-slate-500 dark:text-slate-400">
                  Usos Gratis
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Footer -->
      <footer
        class="text-center text-sm text-slate-500 dark:text-slate-400 py-8 border-t border-slate-200 dark:border-slate-800"
      >
        <p>Construido con ❤️ usando Astro, React, Vue & Svelte</p>
      </footer>
    </div>
  </main>
</Layout>

<script>
  function setupScrollreveal() {
    const observerOptions = {
      threshold: 0.15,
      rootMargin: "0px",
    };

    const observer = new IntersectionObserver((entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          entry.target.classList.add("is-visible");
        } else {
          entry.target.classList.remove("is-visible");
        }
      });
    }, observerOptions);

    document.querySelectorAll(".reveal-on-scroll").forEach((el) => {
      observer.observe(el);
    });
  }

  setupScrollreveal();
  document.addEventListener("astro:after-swap", setupScrollreveal);
</script>

<style>
  .reveal-on-scroll {
    opacity: 0;
    transform: translateY(30px) scale(0.98);
    transition: all 1s cubic-bezier(0.4, 0, 0.2, 1);
    filter: blur(10px);
  }

  .reveal-on-scroll.is-visible {
    opacity: 1;
    transform: translateY(0) scale(1);
    filter: blur(0);
  }

  .glass-morph {
    background: rgba(255, 255, 255, 0.03);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
  }

  .reveal-on-scroll.is-visible .glass-morph {
    animation: portal-entry 1.2s cubic-bezier(0.23, 1, 0.32, 1) forwards;
  }

  @keyframes portal-entry {
    0% {
      opacity: 0;
      transform: perspective(1000px) rotateX(10deg) translateY(20px);
      box-shadow: 0 0 0 0 rgba(79, 70, 229, 0);
    }
    100% {
      opacity: 1;
      transform: perspective(1000px) rotateX(0deg) translateY(0);
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
    }
  }

  @keyframes slideUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-slide-up {
    animation: slideUp 0.5s ease-out forwards;
    opacity: 0;
  }
</style>
